# scripts/build.py
from datetime import datetime, timezone, timedelta
from pathlib import Path

KST = timezone(timedelta(hours=9))
today = datetime.now(KST).date()
iso = today.isoformat()

root = Path(".")
archive_dir = root / "archive" / iso
archive_dir.mkdir(parents=True, exist_ok=True)

html = f"""<!doctype html>
<html lang="ko"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>AI ë‰´ìŠ¤ ì¹´ë“œë‰´ìŠ¤ | {iso}</title>
<style>
  body{{font-family:system-ui,"Noto Sans KR",sans-serif;background:#eef2ff;margin:0;color:#0b1020}}
  .wrap{{max-width:1120px;margin:0 auto;padding:24px}}
  header{{background:linear-gradient(180deg,#e6eeff,transparent);padding:32px 0 12px;border-bottom:1px solid #e6e9f0}}
  h1{{margin:.2em 0;font-size:clamp(24px,5vw,44px)}}
  .grid{{display:grid;gap:18px;margin-top:22px;grid-template-columns:repeat(12,1fr)}}
  .card{{grid-column:span 12;background:#fff;border:1px solid #e6e9f0;border-radius:20px;padding:18px;
         box-shadow:0 8px 28px rgba(0,0,0,.06)}}
  @media(min-width:720px){{.card{{grid-column:span 6}}}}
  @media(min-width:1024px){{.card{{grid-column:span 4}}}}
  .kicker{{font-size:12px;color:#5a7cff;font-weight:800;margin-bottom:6px}}
  .meta{{margin-top:10px;color:#6b7280;font-size:12.5px}}
  a{{color:#3057ff}}
</style></head><body>
<header><div class="wrap">
  <span>ğŸ“… {iso}</span>
  <h1>AI ë‰´ìŠ¤ ì¹´ë“œë‰´ìŠ¤</h1>
  <p>ì˜¤ëŠ˜ì˜ AI ì´ìŠˆë¥¼ ì¹´ë“œë‰´ìŠ¤ì²˜ëŸ¼ í•œ ë²ˆì— í›‘ì–´ë³´ê¸°</p>
  <p><a href="archive/{iso}/">ğŸ“š ì˜¤ëŠ˜ ì•„ì¹´ì´ë¸Œë¡œ ë°”ë¡œê°€ê¸°</a></p>
</div></header>

<main class="wrap grid">
  <!-- í•„ìš”í•œ ë§Œí¼ ì¹´ë“œ ë°˜ë³µí•´ì„œ ì±„ìš°ì„¸ìš” -->
  <article class="card">
    <div class="kicker">ì¹´ë“œ 1</div>
    <h3>ì˜ˆì‹œ ì œëª©</h3>
    <p>ì—¬ê¸°ì— ì˜¤ëŠ˜ì ìš”ì•½ì„ ë„£ìŠµë‹ˆë‹¤. ì‹¤ì œ ìš´ì˜ ì‹œ RSS/í¬ë¡¤ëŸ¬ë¡œ ë‚´ìš©ì„ ì±„ìš°ë„ë¡ í™•ì¥í•˜ì„¸ìš”.</p>
    <div class="meta">{iso}</div>
  </article>
</main>

<footer class="wrap" style="text-align:center;color:#6b7280;padding:34px 0 60px">
  Â© Daily AI News Â· {iso}
</footer>
</body></html>"""

# ë©”ì¸ê³¼ ì•„ì¹´ì´ë¸Œ ëª¨ë‘ ê°±ì‹ 
(root / "index.html").write_text(html, encoding="utf-8")
(archive_dir / "index.html").write_text(html, encoding="utf-8")
print("Generated index.html and", archive_dir / "index.html")
