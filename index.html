# scripts/build.py
from datetime import datetime, timezone, timedelta
from pathlib import Path

KST = timezone(timedelta(hours=9))
today = datetime.now(KST).date()
iso = today.isoformat()

root = Path(".")
archive_dir = root / "archive" / iso
archive_dir.mkdir(parents=True, exist_ok=True)

html = f"""<!doctype html>
<html lang="ko"><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>AI 뉴스 카드뉴스 | {iso}</title>
<style>
  body{{font-family:system-ui,"Noto Sans KR",sans-serif;background:#eef2ff;margin:0;color:#0b1020}}
  .wrap{{max-width:1120px;margin:0 auto;padding:24px}}
  header{{background:linear-gradient(180deg,#e6eeff,transparent);padding:32px 0 12px;border-bottom:1px solid #e6e9f0}}
  h1{{margin:.2em 0;font-size:clamp(24px,5vw,44px)}}
  .grid{{display:grid;gap:18px;margin-top:22px;grid-template-columns:repeat(12,1fr)}}
  .card{{grid-column:span 12;background:#fff;border:1px solid #e6e9f0;border-radius:20px;padding:18px;
         box-shadow:0 8px 28px rgba(0,0,0,.06)}}
  @media(min-width:720px){{.card{{grid-column:span 6}}}}
  @media(min-width:1024px){{.card{{grid-column:span 4}}}}
  .kicker{{font-size:12px;color:#5a7cff;font-weight:800;margin-bottom:6px}}
  .meta{{margin-top:10px;color:#6b7280;font-size:12.5px}}
  a{{color:#3057ff}}
</style></head><body>
<header><div class="wrap">
  <span>📅 {iso}</span>
  <h1>AI 뉴스 카드뉴스</h1>
  <p>오늘의 AI 이슈를 카드뉴스처럼 한 번에 훑어보기</p>
  <p><a href="archive/{iso}/">📚 오늘 아카이브로 바로가기</a></p>
</div></header>

<main class="wrap grid">
  <!-- 필요한 만큼 카드 반복해서 채우세요 -->
  <article class="card">
    <div class="kicker">카드 1</div>
    <h3>예시 제목</h3>
    <p>여기에 오늘자 요약을 넣습니다. 실제 운영 시 RSS/크롤러로 내용을 채우도록 확장하세요.</p>
    <div class="meta">{iso}</div>
  </article>
</main>

<footer class="wrap" style="text-align:center;color:#6b7280;padding:34px 0 60px">
  © Daily AI News · {iso}
</footer>
</body></html>"""

# 메인과 아카이브 모두 갱신
(root / "index.html").write_text(html, encoding="utf-8")
(archive_dir / "index.html").write_text(html, encoding="utf-8")
print("Generated index.html and", archive_dir / "index.html")
